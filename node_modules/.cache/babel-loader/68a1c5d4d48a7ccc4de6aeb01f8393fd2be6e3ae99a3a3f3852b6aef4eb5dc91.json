{"ast":null,"code":"import _slicedToArray from\"/Users/sattarovas/Desktop/for fun/tic-tac-toe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useCallback,useMemo,useState}from\"react\";// import {RxCross1} from \"@react-icons/all-files/rx/RxCross1\";\n// import { BsCircle } from \"@react-icons/all-files/bs/BsCircle\";\nimport{SquareFilling}from\"../../types/square\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var GameField=function GameField(){var _useState=useState([null,null,null,null,null,null,null,null,null]),_useState2=_slicedToArray(_useState,2),squares=_useState2[0],setSquaresState=_useState2[1];var findAndFillEmptySquare=function findAndFillEmptySquare(){var idx=squares.findLastIndex(function(item){return item===null;});var newState=squares.slice();newState.splice(idx,1,SquareFilling.Zero);setSquaresState(newState);};var onSquareClick=useCallback(function(state,onUpdate){if(state===null){onUpdate(SquareFilling.Cross);findAndFillEmptySquare();}},[findAndFillEmptySquare]);var field=useMemo(function(){return squares.map(function(item,idx){var _onClick=function onClick(){var newState=squares.slice();newState.splice(idx,1,SquareFilling.Cross);setSquaresState(newState);};return/*#__PURE__*/_jsx(Square,{state:item,onClick:function onClick(){onSquareClick(item,_onClick);}});});},[squares,setSquaresState,onSquareClick]);return/*#__PURE__*/_jsx(\"div\",{children:field});};export var Square=function Square(_ref){var state=_ref.state,onClick=_ref.onClick;return/*#__PURE__*/_jsxs(\"div\",{className:\"game-field__square\",onClick:onClick,children:[state===SquareFilling.Cross&&/*#__PURE__*/_jsx(\"div\",{children:\"\\u043A\\u0440\\u0435\\u0441\\u0442\\u0438\\u043A\"}),state===SquareFilling.Zero&&/*#__PURE__*/_jsx(\"div\",{children:\"\\u043D\\u043E\\u043B\\u0438\\u043A\"})]});};","map":{"version":3,"names":["React","useCallback","useMemo","useState","SquareFilling","jsx","_jsx","jsxs","_jsxs","GameField","_useState","_useState2","_slicedToArray","squares","setSquaresState","findAndFillEmptySquare","idx","findLastIndex","item","newState","slice","splice","Zero","onSquareClick","state","onUpdate","Cross","field","map","onClick","Square","children","_ref","className"],"sources":["/Users/sattarovas/Desktop/for fun/tic-tac-toe/src/components/GameField/GameField.tsx"],"sourcesContent":["import React, { useCallback, useMemo, useState } from \"react\"\n// import {RxCross1} from \"@react-icons/all-files/rx/RxCross1\";\n// import { BsCircle } from \"@react-icons/all-files/bs/BsCircle\";\n\nimport { SquareFilling, SquareState } from \"../../types/square\";\n\n\nexport const GameField = () => {\n    const [squares, setSquaresState] = useState<SquareState[]>([\n      null,\n      null,\n      null,\n      null,\n      null,\n      null,\n      null,\n      null,\n      null,\n    ]);\n\n    const findAndFillEmptySquare = () => {\n        const idx = squares.findLastIndex((item) => item === null)\n        const newState = squares.slice();\n        newState.splice(idx, 1, SquareFilling.Zero);\n        setSquaresState(newState);\n    }\n\n    const onSquareClick = useCallback((state: SquareState, onUpdate: (state: SquareState) => void) => {\n        if (state === null) {\n            onUpdate(SquareFilling.Cross);\n            findAndFillEmptySquare();\n        } \n    }, [findAndFillEmptySquare])\n\n    const field = useMemo(() => {\n      return squares.map((item, idx) => {\n        const onClick = () => {\n          const newState = squares.slice();\n          newState.splice(idx, 1, SquareFilling.Cross);\n          setSquaresState(newState);\n        };\n        return (\n          <Square\n            state={item}\n            onClick={() => {\n              onSquareClick(item, onClick);\n            }}\n          />\n        );\n      });\n    }, [squares, setSquaresState, onSquareClick]);\n\n\n    return <div>{field}</div>;\n}\n\n\nexport const Square = ({state, onClick}: {state: SquareState, onClick: () => void}) => {\n\n    return (\n        <div className={\"game-field__square\"} onClick={onClick}>\n            {state === SquareFilling.Cross && <div>крестик</div>}\n            {state === SquareFilling.Zero && <div>нолик</div>}\n        </div>\n    );\n}\n"],"mappings":"mIAAA,MAAO,CAAAA,KAAK,EAAIC,WAAW,CAAEC,OAAO,CAAEC,QAAQ,KAAQ,OAAO,CAC7D;AACA;AAEA,OAASC,aAAa,KAAqB,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAGhE,MAAO,IAAM,CAAAC,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAA,CAAS,CAC3B,IAAAC,SAAA,CAAmCP,QAAQ,CAAgB,CACzD,IAAI,CACJ,IAAI,CACJ,IAAI,CACJ,IAAI,CACJ,IAAI,CACJ,IAAI,CACJ,IAAI,CACJ,IAAI,CACJ,IAAI,CACL,CAAC,CAAAQ,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAVKG,OAAO,CAAAF,UAAA,IAAEG,eAAe,CAAAH,UAAA,IAY/B,GAAM,CAAAI,sBAAsB,CAAG,QAAzB,CAAAA,sBAAsBA,CAAA,CAAS,CACjC,GAAM,CAAAC,GAAG,CAAGH,OAAO,CAACI,aAAa,CAAC,SAACC,IAAI,QAAK,CAAAA,IAAI,GAAK,IAAI,GAAC,CAC1D,GAAM,CAAAC,QAAQ,CAAGN,OAAO,CAACO,KAAK,CAAC,CAAC,CAChCD,QAAQ,CAACE,MAAM,CAACL,GAAG,CAAE,CAAC,CAAEZ,aAAa,CAACkB,IAAI,CAAC,CAC3CR,eAAe,CAACK,QAAQ,CAAC,CAC7B,CAAC,CAED,GAAM,CAAAI,aAAa,CAAGtB,WAAW,CAAC,SAACuB,KAAkB,CAAEC,QAAsC,CAAK,CAC9F,GAAID,KAAK,GAAK,IAAI,CAAE,CAChBC,QAAQ,CAACrB,aAAa,CAACsB,KAAK,CAAC,CAC7BX,sBAAsB,CAAC,CAAC,CAC5B,CACJ,CAAC,CAAE,CAACA,sBAAsB,CAAC,CAAC,CAE5B,GAAM,CAAAY,KAAK,CAAGzB,OAAO,CAAC,UAAM,CAC1B,MAAO,CAAAW,OAAO,CAACe,GAAG,CAAC,SAACV,IAAI,CAAEF,GAAG,CAAK,CAChC,GAAM,CAAAa,QAAO,CAAG,QAAV,CAAAA,OAAOA,CAAA,CAAS,CACpB,GAAM,CAAAV,QAAQ,CAAGN,OAAO,CAACO,KAAK,CAAC,CAAC,CAChCD,QAAQ,CAACE,MAAM,CAACL,GAAG,CAAE,CAAC,CAAEZ,aAAa,CAACsB,KAAK,CAAC,CAC5CZ,eAAe,CAACK,QAAQ,CAAC,CAC3B,CAAC,CACD,mBACEb,IAAA,CAACwB,MAAM,EACLN,KAAK,CAAEN,IAAK,CACZW,OAAO,CAAE,SAAAA,QAAA,CAAM,CACbN,aAAa,CAACL,IAAI,CAAEW,QAAO,CAAC,CAC9B,CAAE,CACH,CAAC,CAEN,CAAC,CAAC,CACJ,CAAC,CAAE,CAAChB,OAAO,CAAEC,eAAe,CAAES,aAAa,CAAC,CAAC,CAG7C,mBAAOjB,IAAA,QAAAyB,QAAA,CAAMJ,KAAK,CAAM,CAAC,CAC7B,CAAC,CAGD,MAAO,IAAM,CAAAG,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAAE,IAAA,CAAoE,IAA/D,CAAAR,KAAK,CAAAQ,IAAA,CAALR,KAAK,CAAEK,OAAO,CAAAG,IAAA,CAAPH,OAAO,CAElC,mBACIrB,KAAA,QAAKyB,SAAS,CAAE,oBAAqB,CAACJ,OAAO,CAAEA,OAAQ,CAAAE,QAAA,EAClDP,KAAK,GAAKpB,aAAa,CAACsB,KAAK,eAAIpB,IAAA,QAAAyB,QAAA,CAAK,4CAAO,CAAK,CAAC,CACnDP,KAAK,GAAKpB,aAAa,CAACkB,IAAI,eAAIhB,IAAA,QAAAyB,QAAA,CAAK,gCAAK,CAAK,CAAC,EAChD,CAAC,CAEd,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}